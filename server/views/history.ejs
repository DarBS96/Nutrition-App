<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous" />
    <link rel="stylesheet" href="/login/login.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous" defer></script>
</head>

<body>
    <main class="container">
        <%- include("./partials/navbar.ejs"); %>
            <h1 class="display-4 text-center mt-3">Your data history</h1>
            <button class="deleteAll btn btn-danger d-block m-auto mb-4">
        Delete All
      </button>
            <section>
                <div class="cards-container d-flex flex-wrap">
                    <% displayAllFoodFromDB?.forEach(data => { %>
                        <div class="card m-auto mb-2" style="width: 18rem">
                            <img src="<%=data.photo_thumb %>" style="height: 160px" class="card-img-top" alt="..." />
                            <div class="card-body">
                                <h5 class="card-title">
                                    <%=data?.food_name %>
                                </h5>
                                <p class="card-text">Information</p>
                            </div>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    grams:
                                    <%=data.serving_weight_grams %>
                                </li>
                                <li class="list-group-item">
                                    Calories:
                                    <%=data.nf_calories%> grams
                                </li>
                                <li class="list-group-item">
                                    carbons:
                                    <%=data.nf_total_carbohydrate%> grams
                                </li>
                                <li class="list-group-item">
                                    proteins:
                                    <%=data.nf_protein%> grams
                                </li>
                            </ul>
                        </div>
                        <% }) %>
                </div>
            </section>
    </main>
    <script>
        const btnDeleteAll = document.querySelector(".deleteAll");
        btnDeleteAll.addEventListener("click", () => {
            console.log("clicked");
            (async() => {
                const res = fetch("/homepage/delete", {
                    method: "post",
                });
            })();
            setTimeout(() => {
                location.reload();
            }, 100);
        });
    </script>
</body>

</html>